<!DOCTYPE html>
<input id="searchBox" name="searchBox" type="text" inputmode="search" autocomplete="off" placeholder="Enter your nameâ€¦" aria-describedby="resultCount" />
<button class="btn" id="clearBtn" type="button" aria-label="Clear search">Clear</button>
</div>
<div id="resultCount" class="result" aria-live="polite"></div>
</section>


<section>
<div id="list" class="list" aria-live="polite"></div>
</section>


<figure>
<div class="plan-wrap">
<a id="thumbLink" href="#" aria-label="Open floor plan">
<img id="thumb" src="Seating_Plan.jpg" alt="Wedding floor plan thumbnail" />
</a>
<div id="pinLayer" class="pin-layer" aria-hidden="true"></div>
</div>
<figcaption>Tap to zoom & drag. Doubleâ€‘tap to reset. Search results can highlight the table pin.</figcaption>
</figure>
</div>


<!-- Modal Lightbox -->
<dialog id="lightbox" class="lightbox" aria-label="Zoomed floor plan">
<a href="#" class="close" id="closeX" aria-label="Close">âœ•</a>
<div class="plan-wrap" style="max-width:min(92vw,1100px);">
<img id="zoomImg" src="Seating_Plan.jpg" alt="Wedding floor plan large" />
<div id="pinLayerDialog" class="pin-layer" aria-hidden="true"></div>
</div>
<div class="help">Drag to move â€¢ Doubleâ€‘tap to reset â€¢ Esc to close</div>
</dialog>


<script>
  // --- Data --------------------------------------------------------------
  const guests = [
    // Table 1
    { name: "Misuk Lee", table: "Table 1", seat: "Seat 1" },
    { name: "Youn Kang", table: "Table 1", seat: "Seat 2" },
    { name: "Yumi Park", table: "Table 1", seat: "Seat 3" },
    { name: "Lucia Hwang", table: "Table 1", seat: "Seat 4" },
    { name: "Daniel Hwang", table: "Table 1", seat: "Seat 5" },
    { name: "Eugene Hwang", table: "Table 1", seat: "Seat 6" },

    // Table 2
    { name: "Youngsuk Lee", table: "Table 2", seat: "Seat 1" },
    { name: "Han Yoon", table: "Table 2", seat: "Seat 2" },
    { name: "Larry Yoon", table: "Table 2", seat: "Seat 3" },
    { name: "Younglan Yoon", table: "Table 2", seat: "Seat 4" },
    { name: "Sukmo Lim", table: "Table 2", seat: "Seat 5" },
    { name: "Anthony Kim", table: "Table 2", seat: "Seat 6" },
    { name: "Laurie Yoon", table: "Table 2", seat: "Seat 7" },
    { name: "Youngsun Yoon", table: "Table 2", seat: "Seat 8" },

    // Table 3
    { name: "Joseph Lee", table: "Table 3", seat: "Seat 1" },
    { name: "Kate Oh", table: "Table 3", seat: "Seat 2" },
    { name: "Hye Suk Choi", table: "Table 3", seat: "Seat 3" },
    { name: "Jinmo Choi", table: "Table 3", seat: "Seat 4" },
    { name: "Duhwan OH", table: "Table 3", seat: "Seat 5" },
    { name: "Young Ae Yun", table: "Table 3", seat: "Seat 6" },
    { name: "Gayeon Pyo", table: "Table 3", seat: "Seat 7" },

    // Table 4
    { name: "Peter Kim", table: "Table 4", seat: "Seat 1" },
    { name: "Byeongseok Oh", table: "Table 4", seat: "Seat 2" },
    { name: "Yujin Kim", table: "Table 4", seat: "Seat 3" },
    { name: "Won Min", table: "Table 4", seat: "Seat 4" },
    { name: "Jonathan Lepine", table: "Table 4", seat: "Seat 5" },
    { name: "Min Baek", table: "Table 4", seat: "Seat 6" },
    { name: "Teresa Kim", table: "Table 4", seat: "Seat 7" },
    { name: "Micah Kim", table: "Table 4", seat: "Seat 8" },

    // Table 5
    { name: "Hamin Song", table: "Table 5", seat: "Seat 1" },
    { name: "Taesuk Song", table: "Table 5", seat: "Seat 2" },
    { name: "Yoon Lee", table: "Table 5", seat: "Seat 3" },
    { name: "Minkyung Lee", table: "Table 5", seat: "Seat 4" },
    { name: "Hajun Cho", table: "Table 5", seat: "Seat 5" },
    { name: "Jaemin Cho", table: "Table 5", seat: "Seat 6" },
    { name: "Minkyu Kim", table: "Table 5", seat: "Seat 7" },
    { name: "Aliyah Kim", table: "Table 5", seat: "Seat 8" },

    // Table 6
    { name: "Heesu Kim", table: "Table 6", seat: "Seat 1" },
    { name: "Daekeun Song", table: "Table 6", seat: "Seat 2" },
    { name: "Harim Choi", table: "Table 6", seat: "Seat 3" },
    { name: "Han Jun Ji", table: "Table 6", seat: "Seat 4" },
    { name: "Yoon Ryu", table: "Table 6", seat: "Seat 5" },
    { name: "Tony Choi", table: "Table 6", seat: "Seat 6" },

    // Table 7
    { name: "Gi Cheol Son", table: "Table 7", seat: "Seat 1" },
    { name: "Eunjoo Lee", table: "Table 7", seat: "Seat 2" },
    { name: "Seonju Lee", table: "Table 7", seat: "Seat 3" },
    { name: "Jaehyun Ko", table: "Table 7", seat: "Seat 4" },
    { name: "Soon Ok Chung", table: "Table 7", seat: "Seat 5" },
    { name: "Mi Roung Kim", table: "Table 7", seat: "Seat 6" },
    { name: "Young Sook Yang", table: "Table 7", seat: "Seat 7" },
    { name: "Bongran Lee", table: "Table 7", seat: "Seat 8" },

    // Table 8
    { name: "Minjeong Kim", table: "Table 8", seat: "Seat 1" },
    { name: "Jiwan Kim", table: "Table 8", seat: "Seat 2" },
    { name: "Jonghun Park", table: "Table 8", seat: "Seat 3" },
    { name: "Han So Chang", table: "Table 8", seat: "Seat 4" },
    { name: "Dabin Ham", table: "Table 8", seat: "Seat 5" },
    { name: "Woongbin Ham", table: "Table 8", seat: "Seat 6" },
    { name: "Chaebin Ham", table: "Table 8", seat: "Seat 7" },

    // Table 9
    { name: "Leah Lee", table: "Table 9", seat: "Seat 1" },
    { name: "Chloe Lee", table: "Table 9", seat: "Seat 2" },
    { name: "Hyunhee Park", table: "Table 9", seat: "Seat 3" },
    { name: "Bangul Han", table: "Table 9", seat: "Seat 4" },
    { name: "Hannah Lee", table: "Table 9", seat: "Seat 5" },
    { name: "Haesol Lee", table: "Table 9", seat: "Seat 6" },
    { name: "Juhong Lee", table: "Table 9", seat: "Seat 7" },
    { name: "Youngbok Lee", table: "Table 9", seat: "Seat 8" },

    // Table 10
    { name: "Kaylie Chaerim Oh", table: "Table 10", seat: "Seat 1" },
    { name: "Kasey Jiyeon Oh", table: "Table 10", seat: "Seat 2" },
    { name: "Seunghee Noh", table: "Table 10", seat: "Seat 3" },
    { name: "Minji Kang", table: "Table 10", seat: "Seat 4" },
    { name: "Elle Park", table: "Table 10", seat: "Seat 5" },
    { name: "Noah Park", table: "Table 10", seat: "Seat 6" },
    { name: "Jinwoo Park", table: "Table 10", seat: "Seat 7" },
    { name: "Jungbin Oh", table: "Table 10", seat: "Seat 8" },

    // Table 11
    { name: "Hahnul Ku", table: "Table 11", seat: "Seat 1" },
    { name: "Doyeon Oh", table: "Table 11", seat: "Seat 2" },
    { name: "Sungmin Kang", table: "Table 11", seat: "Seat 3" },
    { name: "Hyejin Nam", table: "Table 11", seat: "Seat 4" },
    { name: "Youna Oh", table: "Table 11", seat: "Seat 5" },
    { name: "Euido Jeong", table: "Table 11", seat: "Seat 6" },
    { name: "Donghyeon Ku", table: "Table 11", seat: "Seat 7" },

    // Table 12
    { name: "James Kim", table: "Table 12", seat: "Seat 1" },
    { name: "Lujayne Alhalabi", table: "Table 12", seat: "Seat 2" },
    { name: "Hee Jin Kim", table: "Table 12", seat: "Seat 3" },
    { name: "Joeun Kim", table: "Table 12", seat: "Seat 4" },
    { name: "Andy Moon", table: "Table 12", seat: "Seat 5" },
    { name: "Youngbin Nam", table: "Table 12", seat: "Seat 6" },

    // Table 13
    { name: "Caelan Mathews", table: "Table 13", seat: "Seat 1" },
    { name: "Ai Nagayama", table: "Table 13", seat: "Seat 2" },
    { name: "Kasmir Ley, Palogan", table: "Table 13", seat: "Seat 3" },
    { name: "Joy Robles", table: "Table 13", seat: "Seat 4" },
    { name: "Andrea Gelindon", table: "Table 13", seat: "Seat 5" },
    { name: "Catherine Dulay", table: "Table 13", seat: "Seat 6" },
    { name: "Vivienne Park Lee", table: "Table 13", seat: "Seat 7" },
    { name: "John Carl, Contreras", table: "Table 13", seat: "Seat 8" },

    // Table 14
    { name: "Zoe", table: "Table 14", seat: "Seat 1" },
    { name: "Sean Lee", table: "Table 14", seat: "Seat 2" },
    { name: "Joey Lee", table: "Table 14", seat: "Seat 3" },
    { name: "Louis", table: "Table 14", seat: "Seat 4" },
    { name: "Spencer", table: "Table 14", seat: "Seat 5" },

    // Table 15
    { name: "Jevan McGowan", table: "Table 15", seat: "Seat 1" },
    { name: "Jacquline Rossi", table: "Table 15", seat: "Seat 2" },
    { name: "Steven Tworow", table: "Table 15", seat: "Seat 3" },
    { name: "Tin Tworow", table: "Table 15", seat: "Seat 4" },
    { name: "Sam Vasanji", table: "Table 15", seat: "Seat 5" },
    { name: "Shyreen Haider", table: "Table 15", seat: "Seat 6" },
    { name: "Adrian Lomeli", table: "Table 15", seat: "Seat 7" },
    { name: "Susana Rodriguez", table: "Table 15", seat: "Seat 8" },

    // Table 16
    { name: "Jaeho Moon", table: "Table 16", seat: "Seat 1" },
    { name: "Eric Um", table: "Table 16", seat: "Seat 2" },
    { name: "Woobin Um", table: "Table 16", seat: "Seat 3" },
    { name: "Vicki Chen", table: "Table 16", seat: "Seat 4" },
    { name: "Emma Lee", table: "Table 16", seat: "Seat 5" },
    { name: "Mason Cho", table: "Table 16", seat: "Seat 6" },
    { name: "Rocky Cho", table: "Table 16", seat: "Seat 7" },

    // Table 17
    { name: "Aaron Kim", table: "Table 17", seat: "Seat 1" },
    { name: "Tae Kim", table: "Table 17", seat: "Seat 2" },
    { name: "Seungmin Ru", table: "Table 17", seat: "Seat 3" },
    { name: "Lua Ru", table: "Table 17", seat: "Seat 4" },
    { name: "Lui Ru", table: "Table 17", seat: "Seat 5" },
    { name: "Haeun Park", table: "Table 17", seat: "Seat 6" },
    { name: "Moon Kim", table: "Table 17", seat: "Seat 7" },
    { name: "Abigail Kim", table: "Table 17", seat: "Seat 8" },

    // Table 18
    { name: "Kyongho Kim", table: "Table 18", seat: "Seat 1" },
    { name: "Karam Hyun", table: "Table 18", seat: "Seat 2" },
    { name: "Mike Choi", table: "Table 18", seat: "Seat 3" },
    { name: "Junyoung Moon", table: "Table 18", seat: "Seat 4" },
    { name: "Minseob Shin", table: "Table 18", seat: "Seat 5" },
    { name: "Woosung Shim", table: "Table 18", seat: "Seat 6" },
    { name: "Jongwon Noh", table: "Table 18", seat: "Seat 7" },
    { name: "Min Sei Choi", table: "Table 18", seat: "Seat 8" },
  ];

  // --- Search helpers ----------------------------------------------------
const norm = s => s.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g,'').replace(/[^a-z0-9\s]/g,'').replace(/\s+/g,' ').trim();
const tokenize = s => norm(s).split(' ').filter(Boolean);


const listEl = document.getElementById('list');
const countEl = document.getElementById('resultCount');
const inputEl = document.getElementById('searchBox');
const clearBtn = document.getElementById('clearBtn');


function highlight(name, query){
const words = [...new Set(tokenize(query))].sort((a,b)=>b.length-a.length);
let html = name;
for(const w of words){
const re = new RegExp(`(${w})`, 'ig');
html = html.replace(re, '<mark>$1</mark>');
}
return html;
}


// --- Pin layers ---
const pinLayer = document.getElementById('pinLayer');
const pinLayerDialog = document.getElementById('pinLayerDialog');
const defaultPins = {
'Table 1': {x:12, y:18}, 'Table 2': {x:24, y:18}, 'Table 3': {x:36, y:18}, 'Table 4': {x:48, y:18},
'Table 5': {x:60, y:18}, 'Table 6': {x:72, y:18}, 'Table 7': {x:84, y:18},
'Table 8': {x:12, y:40}, 'Table 9': {x:24, y:40}, 'Table 10': {x:36, y:40}, 'Table 11': {x:48, y:40},
'Table 12': {x:60, y:40}, 'Table 13': {x:72, y:40}, 'Table 14': {x:84, y:40},
'Table 15': {x:24, y:66}, 'Table 16': {x:44, y:66}, 'Table 17': {x:64, y:66}, 'Table 18': {x:84, y:66},
};
let pins = { ...defaultPins, ...(JSON.parse(localStorage.getItem('tablePins')||'{}')) };


function renderPinLayer(layer){
if(!layer) return;
layer.innerHTML = Object.entries(pins).map(([tbl, p])=>
`<div class="pin" data-table="${tbl}" style="left:${p.x}%; top:${p.y}%">
<div class="label">${tbl}</div>
<div class="dot"></div>
</div>`
).join('');
}
function refreshPins(){ renderPinLayer(pinLayer); renderPinLayer(pinLayerDialog); }
refreshPins();


function highlightTable(table){
document.querySelectorAll('.pin.highlight').forEach(el=> el.classList.remove('highlight'));
const pin = document.querySelector(`#pinLayer .pin[data-table="${table}"]`);
if(pin) pin.classList.add('highlight');
const pinDlg = document.querySelector(`#pinLayerDialog .pin[data-table="${table}"]`);
if(pinDlg) pinDlg.classList.add('highlight');
}


function search(){
const raw = inputEl.value; const q = norm(raw);
if(!q){ render([], ''); return; }
const qTokens = tokenize(raw);


const strictPass = (name)=>{
const n = norm(name); const nameTokens = n.split(' ');
if(qTokens.length >= 2){
const first = nameTokens[0] || ''; const last = nameTokens[nameTokens.length-1] || '';
if(!(first.startsWith(qTokens[0]) && last.startsWith(qTokens[qTokens.length-1]))) return false;
return qTokens.every(qt => nameTokens.some(t=>t.startsWith(qt)));
} else {
return nameTokens.some(t=>t.startsWith(qTokens[0]));
}
};


const results = guests.filter(g=> strictPass(g.name)).slice(0,1);
render(results, raw);
if(results.length){ highlightTable(results[0].table); }
}


function render(matches, query){
countEl.textContent = matches.length ? `${matches.length} result` : (query ? 'No matching names found.' : '');
listEl.innerHTML = matches.map(g=>{
const pretty = highlight(g.name, query);
return `<div class=\"guest-item\" data-table=\"${g.table}\">\n <div class=\"who\">${pretty}</div>\n <div class=\"seat-pill\">ğŸ½ï¸ ${g.table} â€¢ ğŸª‘ ${g.seat}</div>\n </div>`;
}).join('');
}


let t; inputEl.addEventListener('input', ()=>{ clearTimeout(t); t = setTimeout(search, 80); });
clearBtn.addEventListener('click', ()=>{ inputEl.value=''; inputEl.focus(); search(); });
</script>
</body>
</html>
